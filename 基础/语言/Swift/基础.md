# 基础



##### 面向对象编程

> 面向对象的设计和面向协议的设计都使用了多态让我们使用同样的接口来跟不同的类型进行交互。在面向对象的设计中，我们使用了基类提供的接口来跟所有的子类进行交互

##### 面向协议编程

> 在面向协议的设计中，我们使用了协议和协议扩展提供的接口来跟遵守该协议的类型进行交互
>
> **优势**
>
> - 降低了代码的耦合度
>
> - 类可以遵守多个协议而只能拥有一个基类。因此可以创建很多个协议以添加每个特定的功能而不是把所有功能都写到一个巨大的类中
> - 协议不需要源代码就可使用协议扩展添加功能, 因此可以扩展任何协议, 即使是swift自己内建的协议也可扩展.
>   - 而给超类添加功能我们需要知道源代码。我们可以使用扩展给超类添加功能，这意味着所有的子类会继承那个功能。然而，我们一般使用扩展来为特定的类添加功能而非为类的层级添加功能
>
> - 协议可以被类、结构体和枚举遵守，而类层级被约束为类类型 (协议/协议扩展让我们可以在尽可能合理的地方使用值类型)





#### Class & Struct

> swift中, class是引用类型, struct是值类型, 值类型在传递和赋值时将进行复制,而引用类型只会使用引用对象的一个指向;引用类型是在堆上, 而值类型是在栈上进行传递与操作,相比栈上的操作,堆上面的操作更加复杂耗时,推荐使用struct

- class
  - 可以被继承
  - 类型转换可以在runtime的时候进行类型检查
  - deinit可以释放
  - 可以被多次使用
- struct
  - 结构体较小,适用于复制操作, 相比于class实例被多次引用更加安全
  - 无需担心内存泄露与多线程冲突问题



#### Swift为什么将string\array\dict设计为值类型

- 值类型和引用类型相比, 最大优势在于高效的使用内存
- 值类型是在栈上操作, 仅仅是单个指针的移动
- 引用类型是在堆上操作, 牵涉合并\位移\重链接
- swift这样设计减少了堆上内存分配和回收次数, 使用copy-on-write将值传递与复制开销降到最低

