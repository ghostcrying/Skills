# Struct&Union字节对齐



#### 概念

1. 数据类型自身的对齐值：对于char型数据，其自身对齐值为1，对于short型为2，对于int,float,double类型，其自身对齐值为4，单位字节。

2. 结构体或者类的自身对齐值：其成员中自身对齐值最大的那个值。

3. 指定对齐值：#pragma pack (value)时的指定对齐值value。

4. 数据成员、结构体和类的有效对齐值：自身对齐值和指定对齐值中小的那个值。

   

#### 字节对齐原则

1. 数据成员对齐规则：结构(struct)(或联合(union))的数据成员，第一个数据成员放在offset为0的地方，以后每个数据成员的对齐按照#pragma pack指定的数值和这个数据成员自身长度中，比较小的那个进行。

2. 结构(或联合)的整体对齐规则：在数据成员完成各自对齐之后，结构(或联合)本身也要进行对齐，对齐将按照#pragma pack指定的数值和结构(或联合)最大数据成员长度中，比较小的那个进行。

3. 结构体作为成员：如果一个结构里有某些结构体成员，则结构体成员要从其内部最大元素大小的整数倍地址开始存储。



#### Example

![c_byte_01](/Users/Joy/Desktop/Skills/Assets/c_byte_01.gif)